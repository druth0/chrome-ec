/* Copyright 2024 The ChromiumOS Authors
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

#include "../native_sim.overlay"
#include "../../../../program/rex/kanix/cbi.dtsi"

#include <board-overlays/native_sim.dts>
#include <cros/binman.dtsi>
#include <cros/thermistor/thermistor.dtsi>
#include <dt-bindings/gpio_defines.h>
#include <dt-bindings/pwm/pwm.h>
#include <dt-bindings/wake_mask_event_defines.h>
#include <freq.h>


/ {
	aliases {
		gpio-wp = &gpio_ec_wp_l;
	};

	named-gpios {
		gpio_ec_wp_l: ec_wp_l {
			gpios = <&gpio1 13 GPIO_OUTPUT>;
		};
	};

	fan_steps: fan-step {
		compatible = "cros-ec,fan-steps";
		level_0 {
			temp_on = <25>;
			temp_off = <99>;
			rpm_target = <0>;
		};
		level_1 {
			temp_on = <38>;
			temp_off = <34>;
			rpm_target = <2700>;
		};
		level_2 {
			temp_on = <42>;
			temp_off = <37>;
			rpm_target = <2925>;
		};
		level_3 {
			temp_on = <45>;
			temp_off = <41>;
			rpm_target = <3300>;
		};
		level_4 {
			temp_on = <48>;
			temp_off = <44>;
			rpm_target = <3585>;
		};
		level_5 {
			temp_on = <51>;
			temp_off = <47>;
			rpm_target = <3900>;
		};
		level_6 {
			temp_on = <54>;
			temp_off = <50>;
			rpm_target = <4255>;
		};
		level_7 {
			temp_on = <65>;
			temp_off = <60>;
			rpm_target = <4775>;
		};
	};

	chosen {
		cros-ec,keyboard = &fake_keyboard;
	};

	fake_keyboard: fake-device {
		compatible = "gpio-kbd-matrix";
		row-gpios = <&gpio0 0 0>;
		col-gpios = <&gpio0 0 0>;
		debounce-down-ms = <100>;
	};
};
